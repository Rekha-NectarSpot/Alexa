<html>
<head></head>
<body>

<h2>Math_Power (python)</h2>
<pre>

from __future__ import print_function

# --------------- Helpers that build all of the responses ----------------------

def build_speechlet_response(title, output, reprompt_text, should_end_session):
    return {
        'outputSpeech': {
            'type': 'PlainText',
            'text': output
        },
        'card': {
            'type' : 'Standard',
            'title':  title,
            'text' : output
        },

        'reprompt': {
            'outputSpeech': {
                'type': 'PlainText',
                'text': reprompt_text
            }
        },
        'shouldEndSession': should_end_session
    }


def build_response(session_attributes, speechlet_response):
    return {
        'version': '1.0',
        'sessionAttributes': session_attributes,
        'response': speechlet_response
            
    }


# --------------- Functions that control the skill's behavior ------------------

def get_welcome_response():
    """ If we wanted to initialize the session to have some attributes we could
    add those here
    """

    session_attributes = {}
    card_title = "Welcome"
    speech_output = "Welcome to Math Power. " \
                    "Let me know Which multiplication table would you like to recite from 1 to 20 "
    
    # If the user either does not reply to the welcome message or says something
    # that is not understood, they will be prompted again with this text.
    reprompt_text = "Please let me know which multiplication table you want to open from 1 to 20, for example, open multiplication table of 2" 
                    
    should_end_session = False
    return build_response(session_attributes, build_speechlet_response(
        card_title, speech_output, reprompt_text, should_end_session))


def get_multiplication_tables_response(intent_request):
    session_attributes = {}
    card_title = "Multiplication Table"
    speech_output = " "
    table = intent_request["intent"]["slots"]["Table"]["value"]

    if table == "1":
        speech_output = "Table of 1 :  1*1=1, 1*2=2, 1*3=3, 1*4=4, 1*5=5, 1*6=6, 1*7=7, 1*8=8, 1*9=9, 1*10=10, 1*11=11, 1*12=12, 1*13=13, 1*14=14, 1*15=15, 1*16=16, 1*17=17, 1*18=18, 1*19=19, 1*20=20. Which multiplication table would you like to recite from 1 to 20 "
    elif table == "2":
        speech_output = "Table of 2 :  2*1=2, 2*2=4, 2*3=6, 2*4=8, 2*5=10, 2*6=12, 2*7=14, 2*8=16, 2*9=18, 2*10=20, 2*11=22, 2*12=24, 2*13=26, 2*14=28, 2*15=30, 2*16=32, 2*17=34, 2*18=36, 2*19=38, 2*20=40. Which multiplication table would you like to recite from 1 to 20 "
    elif table == "3":
        speech_output = "Table of 3 :  3*1=3, 3*2=6, 3*3=9, 3*4=12, 3*5=15, 3*6=18, 3*7=21, 3*8=24, 3*9=27, 3*10=30, 3*11=33, 3*12=36, 3*13=39, 3*14=42, 3*15=45, 3*16=48, 3*17=51, 3*18=54, 3*19=57, 3*20=60. Which multiplication table would you like to recite from 1 to 20 "
    elif table == "4":
        speech_output = "Table of 4 :  4*1=4, 4*2=8, 4*3=12, 4*4=16, 4*5=20, 4*6=24, 4*7=28, 4*8=32, 4*9=36, 4*10=40, 4*11=44, 4*12=48, 4*13=52, 4*14=56, 4*15=60, 4*16=64, 4*17=68, 4*18=72, 4*19=76, 4*20=80. Which multiplication table would you like to recite from 1 to 20 "
    elif table == "5":
        speech_output = "Table of 5 :  5*1=5, 5*2=10, 5*3=15, 5*4=20, 5*5=25, 5*6=30, 5*7=35, 5*8=40, 5*9=45, 5*10=50, 5*11=55, 5*12=60, 5*13=65, 5*14=70, 5*15=75, 5*16=80, 5*17=85, 5*18=90, 5*19=95, 5*20=100. Which multiplication table would you like to recite from 1 to 20 "
    elif table == "6":
        speech_output = "Table of 6 :  6*1=6, 6*2=12, 6*3=18, 6*4=24, 6*5=30, 6*6=36, 6*7=42, 6*8=48, 6*9=54, 6*10=60, 6*11=66, 6*12=72, 6*13=78, 6*14=84, 6*15=90, 6*16=96, 6*17=102, 6*18=108, 6*19=114, 6*20=120. Which multiplication table would you like to recite from 1 to 20 "
    elif table == "7":
        speech_output = "Table of 7 :  7*1=7, 7*2=14, 7*3=21, 7*4=28, 7*5=35, 7*6=42, 7*7=49, 7*8=56, 7*9=63, 7*10=70, 7*11=77, 7*12=84, 7*13=91, 7*14=98, 7*15=105, 7*16=112, 7*17=119, 7*18=126, 7*19=133, 7*20=140. Which multiplication table would you like to recite from 1 to 20 "
    elif table == "8":
        speech_output = "Table of 8 :  8*1=8, 8*2=16, 8*3=24, 8*4=32, 8*5=40, 8*6=48, 8*7=56, 8*8=64, 8*9=72, 8*10=80, 8*11=88, 8*12=96, 8*13=104, 8*14=112, 8*15=120, 8*16=128, 8*17=136, 8*18=144, 8*19=152, 8*20=160. Which multiplication table would you like to recite from 1 to 20 "
    elif table == "9":
        speech_output = "Table of 9 :  9*1=9, 9*2=18, 9*3=27, 9*4=36, 9*5=45, 9*6=54, 9*7=63, 9*8=72, 9*9=81, 9*10=90, 9*11=99, 9*12=108, 9*13=117, 9*14=126, 9*15=135, 9*16=144, 9*17=153, 9*18=162, 9*19=171, 9*20=180. Which multiplication table would you like to recite from 1 to 20 "
    elif table == "10":
        speech_output = "Table of 10 :  10*1=10, 10*2=20, 10*3=30, 10*4=40, 10*5=50, 10*6=60, 10*7=70, 10*8=80, 10*9=90, 10*10=100, 10*11=110, 10*12=120, 10*13=130, 10*14=140, 10*15=150, 10*16=160, 10*17=170, 10*18=180, 10*19=190, 10*20=200. Which multiplication table would you like to recite from 1 to 20 "
    elif table == "11":
        speech_output = "Table of 11 :  11*1=11, 11*2=22, 11*3=33, 11*4=44, 11*5=55, 11*6=66, 11*7=77, 11*8=88, 11*9=99, 11*10=110, 11*11=121, 11*12=132, 11*13=143, 11*14=154, 11*15=165, 11*16=176, 11*17=187, 11*18=198, 11*19=209, 11*20=220. Which multiplication table would you like to recite from 1 to 20 "
    elif table == "12":
        speech_output = "Table of 12 :  12*1=12, 12*2=24, 12*3=36, 12*4=48, 12*5=60, 12*6=72, 12*7=84, 12*8=96, 12*9=108, 12*10=120, 12*11=132, 12*12=144, 12*13=156, 12*14=168, 12*15=180, 12*16=192, 12*17=204, 12*18=216, 12*19=228, 12*20=240. Which multiplication table would you like to recite from 1 to 20 "
    elif table == "13":
        speech_output = "Table of 13 :  13*1=13, 13*2=26, 13*3=39, 13*4=52, 13*5=65, 13*6=78, 13*7=91, 13*8=104, 13*9=117, 13*10=130, 13*11=143, 13*12=156, 13*13=169, 13*14=182, 13*15=195, 13*16=208, 13*17=221, 13*18=234, 13*19=247, 13*20=260. Which multiplication table would you like to recite from 1 to 20 "
    elif table == "14":
        speech_output = "Table of 14 :  14*1=14, 14*2=28, 14*3=42, 14*4=56, 14*5=70, 14*6=84, 14*7=98, 14*8=112, 14*9=126, 14*10=140, 14*11=154, 14*12=168, 14*13=182, 14*14=196, 14*15=210, 14*16=224, 14*17=238, 14*18=252, 14*19=266, 14*20=280. Which multiplication table would you like to recite from 1 to 20 "
    elif table == "15":
        speech_output = "Table of 15 :  15*1=15, 15*2=30, 15*3=45, 15*4=60, 15*5=75, 15*6=90, 15*7=105, 15*8=120, 15*9=135, 15*10=150, 15*11=165, 15*12=180, 15*13=195, 15*14=210, 15*15=225, 15*16=240, 15*17=255, 15*18=270, 15*19=285, 15*20=300. Which multiplication table would you like to recite from 1 to 20 "
    elif table == "16":
        speech_output = "Table of 16 :  16*1=16, 16*2=32, 16*3=48, 16*4=64, 16*5=80, 16*6=96, 16*7=112, 16*8=128, 16*9=144, 16*10=160, 16*11=176, 16*12=192, 16*13=208, 16*14=224, 16*15=240, 16*16=256, 16*17=272, 16*18=288, 16*19=304, 16*20=320. Which multiplication table would you like to recite from 1 to 20 "
    elif table == "17":
        speech_output = "Table of 17 :  17*1=17, 17*2=34, 17*3=51, 17*4=68, 17*5=85, 17*6=102, 17*7=119, 17*8=136, 17*9=153, 17*10=170, 17*11=187, 17*12=204, 17*13=221, 17*14=238, 17*15=255, 17*16=272, 17*17=289, 17*18=306, 17*19=323, 170*20=340. Which multiplication table would you like to recite from 1 to 20 "
    elif table == "18":
        speech_output = "Table of 18 :  18*1=18, 18*2=36, 18*3=54, 18*4=72, 18*5=90, 18*6=108, 18*7=126, 18*8=144, 18*9=162, 18*10=180, 18*11=198, 18*12=216, 18*13=234, 18*14=252, 18*15=270, 18*16=288, 18*17=306, 18*18=324, 18*19=342, 18*20=360. Which multiplication table would you like to recite from 1 to 20 "
    elif table == "19":
        speech_output = "Table of 19 :  19*1=19, 19*2=38, 19*3=57, 19*4=76, 19*5=95, 19*6=116, 19*7=133, 19*8=152, 19*9=171, 19*10=190, 19*11=209, 19*12=228, 19*13=247, 19*14=266, 19*15=285, 19*16=304, 19*17=323, 19*18=342, 19*19=361, 19*20=380. Which multiplication table would you like to recite from 1 to 20 "
    elif table == "20":
        speech_output = "Table of 20 :  20*1=20, 20*2=40, 20*3=60, 20*4=80, 20*5=100, 20*6=120, 20*7=140, 20*8=160, 20*9=180, 20*10=200, 20*11=220, 20*12=240, 20*13=260, 20*14=280, 20*15=300, 20*16=320, 20*170=340, 20*18=360, 20*19=380, 20*20=400. Which multiplication table would you like to recite from 1 to 20 "
    else:
        speech_output = "Please let me know which multiplication table you want to open from 1 to 20, for example, open multiplication table of 2"
    should_end_session = False
    reprompt_text = speech_output
    return build_response(session_attributes, build_speechlet_response(card_title,speech_output,reprompt_text,should_end_session))
  
  
def get_help_response():
    session_attributes = {}
    card_title = "Help"
    speech_output = "Please clarify which multiplication table you want to open from 1 to 20, for example, open multiplication table of 2"
    reprompt_text = speech_output
    should_end_session = False
    return build_response(session_attributes, build_speechlet_response(card_title,speech_output,reprompt_text,should_end_session))

  

def handle_session_end_request():
    card_title = "Session Ended"
    speech_output = "Thank you for using Math Power."
    # Setting this to true ends the session and exits the skill.
    should_end_session = True
    return build_response({}, build_speechlet_response(
        card_title, speech_output, None, should_end_session))
        
# --------------- Events ------------------

def on_session_started(session_started_request, session):
    """ Called when the session starts """

    print("on_session_started requestId=" + session_started_request['requestId']
          + ", sessionId=" + session['sessionId'])


def on_launch(launch_request, session):
    """ Called when the user launches the skill without specifying what they
    want
    """

    print("on_launch requestId=" + launch_request['requestId'] +
          ", sessionId=" + session['sessionId'])
    # Dispatch to your skill's launch
    return get_welcome_response()


def on_intent(intent_request, session):
    """ Called when the user specifies an intent for this skill """

    print("on_intent requestId=" + intent_request['requestId'] +
          ", sessionId=" + session['sessionId'])

    intent = intent_request['intent']
    intent_name = intent_request['intent']['name']

    # Dispatch to your skill's intent handlers
    if intent_name == "MultiplicationTablesIntent":
        return get_multiplication_tables_response(intent_request)
    elif intent_name == "MyHelpIntent":
        return get_help_response()
    
    elif intent_name == "AMAZON.CancelIntent" or intent_name == "AMAZON.StopIntent":
        return handle_session_end_request()    
    elif intent_name == "AMAZON.HelpIntent":
        return get_help_response()
    
    else:
        raise ValueError("Invalid intent")


def on_session_ended(session_ended_request, session):
    """ Called when the user ends the session.

    Is not called when the skill returns should_end_session=true
    """
    print("on_session_ended requestId=" + session_ended_request['requestId'] +
          ", sessionId=" + session['sessionId'])
    # add cleanup logic here


# --------------- Main handler ------------------

def lambda_handler(event, context):
    """ Route the incoming request based on type (LaunchRequest, IntentRequest,
    etc.) The JSON body of the request is provided in the event parameter.
    """
    print("event.session.application.applicationId=" +
          event['session']['application']['applicationId'])

    """
    Uncomment this if statement and populate with your skill's application ID to
    prevent someone else from configuring a skill that sends requests to this
    function.
    """
    # if (event['session']['application']['applicationId'] !=
    #         "amzn1.echo-sdk-ams.app.[unique-value-here]"):
    #     raise ValueError("Invalid Application ID")

    
    if event['session']['new']:
        on_session_started({'requestId': event['request']['requestId']},
                           event['session'])

    if event['request']['type'] == "LaunchRequest":
        return on_launch(event['request'], event['session'])
    elif event['request']['type'] == "IntentRequest":
        return on_intent(event['request'], event['session'])
    elif event['request']['type'] == "SessionEndedRequest":
        return on_session_ended(event['request'], event['session'])
</pre>
</body>
</html>